/**
 * skylark-pako - A skylark wrapper for pako.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define([],function(){"use strict";function e(e){let t=e.length;for(;--t>=0;)e[t]=0}const t=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);e(l);const a=new Array(60);e(a);const d=new Array(512);e(d);const i=new Array(256);e(i);const s=new Array(29);e(s);const b=new Array(30);function o(e,t,_,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=_,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let f,p,h;function c(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}e(b);const u=e=>e<256?d[e]:d[256+(e>>>7)],y=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},w=(e,t,_)=>{e.bi_valid>16-_?(e.bi_buf|=t<<e.bi_valid&65535,y(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=_-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=_)},g=(e,t,_)=>{w(e,_[2*t],_[2*t+1])},m=(e,t)=>{let _=0;do{_|=1&e,e>>>=1,_<<=1}while(--t>0);return _>>>1},x=(e,t,_)=>{const n=new Array(16);let r,l,a=0;for(r=1;r<=15;r++)n[r]=a=a+_[r-1]<<1;for(l=0;l<=t;l++){let t=e[2*l+1];0!==t&&(e[2*l]=m(n[t]++,t))}},v=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},A=e=>{e.bi_valid>8?y(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},U=(e,t,_,n)=>{const r=2*t,l=2*_;return e[r]<e[l]||e[r]===e[l]&&n[t]<=n[_]},k=(e,t,_)=>{const n=e.heap[_];let r=_<<1;for(;r<=e.heap_len&&(r<e.heap_len&&U(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!U(t,n,e.heap[r],e.depth));)e.heap[_]=e.heap[r],_=r,r<<=1;e.heap[_]=n},z=(e,n,r)=>{let l,a,d,o,f=0;if(0!==e.last_lit)do{l=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],a=e.pending_buf[e.l_buf+f],f++,0===l?g(e,a,n):(d=i[a],g(e,d+256+1,n),0!==(o=t[d])&&(a-=s[d],w(e,a,o)),d=u(--l),g(e,d,r),0!==(o=_[d])&&(l-=b[d],w(e,l,o)))}while(f<e.last_lit);g(e,256,n)},j=(e,t)=>{const _=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,l=t.stat_desc.elems;let a,d,i,s=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<l;a++)0!==_[2*a]?(e.heap[++e.heap_len]=s=a,e.depth[a]=0):_[2*a+1]=0;for(;e.heap_len<2;)_[2*(i=e.heap[++e.heap_len]=s<2?++s:0)]=1,e.depth[i]=0,e.opt_len--,r&&(e.static_len-=n[2*i+1]);for(t.max_code=s,a=e.heap_len>>1;a>=1;a--)k(e,_,a);i=l;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],k(e,_,1),d=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=d,_[2*i]=_[2*a]+_[2*d],e.depth[i]=(e.depth[a]>=e.depth[d]?e.depth[a]:e.depth[d])+1,_[2*a+1]=_[2*d+1]=i,e.heap[1]=i++,k(e,_,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const _=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,l=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,i=t.stat_desc.max_length;let s,b,o,f,p,h,c=0;for(f=0;f<=15;f++)e.bl_count[f]=0;for(_[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<573;s++)(f=_[2*_[2*(b=e.heap[s])+1]+1]+1)>i&&(f=i,c++),_[2*b+1]=f,b>n||(e.bl_count[f]++,p=0,b>=d&&(p=a[b-d]),h=_[2*b],e.opt_len+=h*(f+p),l&&(e.static_len+=h*(r[2*b+1]+p)));if(0!==c){do{for(f=i-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[i]--,c-=2}while(c>0);for(f=i;0!==f;f--)for(b=e.bl_count[f];0!==b;)(o=e.heap[--s])>n||(_[2*o+1]!==f&&(e.opt_len+=(f-_[2*o+1])*_[2*o],_[2*o+1]=f),b--)}})(e,t),x(_,s,e.bl_count)},q=(e,t,_)=>{let n,r,l=-1,a=t[1],d=0,i=7,s=4;for(0===a&&(i=138,s=3),t[2*(_+1)+1]=65535,n=0;n<=_;n++)r=a,a=t[2*(n+1)+1],++d<i&&r===a||(d<s?e.bl_tree[2*r]+=d:0!==r?(r!==l&&e.bl_tree[2*r]++,e.bl_tree[32]++):d<=10?e.bl_tree[34]++:e.bl_tree[36]++,d=0,l=r,0===a?(i=138,s=3):r===a?(i=6,s=3):(i=7,s=4))},B=(e,t,_)=>{let n,r,l=-1,a=t[1],d=0,i=7,s=4;for(0===a&&(i=138,s=3),n=0;n<=_;n++)if(r=a,a=t[2*(n+1)+1],!(++d<i&&r===a)){if(d<s)do{g(e,r,e.bl_tree)}while(0!=--d);else 0!==r?(r!==l&&(g(e,r,e.bl_tree),d--),g(e,16,e.bl_tree),w(e,d-3,2)):d<=10?(g(e,17,e.bl_tree),w(e,d-3,3)):(g(e,18,e.bl_tree),w(e,d-11,7));d=0,l=r,0===a?(i=138,s=3):r===a?(i=6,s=3):(i=7,s=4)}};let C=!1;const D=(e,t,_,n)=>{w(e,0+(n?1:0),3),t=t,G=_,H=!0,A(e=e),H&&(y(e,G),y(e,~G)),e.pending_buf.set(e.window.subarray(t,t+G),e.pending),e.pending+=G};var E,F,G,H;return{_tr_init:e=>{C||((()=>{let e,r,c,u,y;const w=new Array(16);for(c=0,u=0;u<28;u++)for(s[u]=c,e=0;e<1<<t[u];e++)i[c++]=u;for(i[c-1]=u,y=0,u=0;u<16;u++)for(b[u]=y,e=0;e<1<<_[u];e++)d[y++]=u;for(y>>=7;u<30;u++)for(b[u]=y<<7,e=0;e<1<<_[u]-7;e++)d[256+y++]=u;for(r=0;r<=15;r++)w[r]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,w[8]++;for(;e<=255;)l[2*e+1]=9,e++,w[9]++;for(;e<=279;)l[2*e+1]=7,e++,w[7]++;for(;e<=287;)l[2*e+1]=8,e++,w[8]++;for(x(l,287,w),e=0;e<30;e++)a[2*e+1]=5,a[2*e]=m(e,5);f=new o(l,t,257,286,15),p=new o(a,_,0,30,15),h=new o(new Array(0),n,0,19,7)})(),C=!0),e.l_desc=new c(e.dyn_ltree,f),e.d_desc=new c(e.dyn_dtree,p),e.bl_desc=new c(e.bl_tree,h),e.bi_buf=0,e.bi_valid=0,v(e)},_tr_stored_block:D,_tr_flush_block:(e,t,_,n)=>{let d,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,_=4093624447;for(t=0;t<=31;t++,_>>>=1)if(1&_&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),j(e,e.l_desc),j(e,e.d_desc),s=(e=>{let t;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),j(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*r[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),d=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=d&&(d=i)):d=i=_+5,_+4<=d&&-1!==t?D(e,t,_,n):4===e.strategy||i===d?(w(e,2+(n?1:0),3),z(e,l,a)):(w(e,4+(n?1:0),3),((e,t,_,n)=>{let l;for(w(e,t-257,5),w(e,_-1,5),w(e,n-4,4),l=0;l<n;l++)w(e,e.bl_tree[2*r[l]+1],3);B(e,e.dyn_ltree,t-1),B(e,e.dyn_dtree,_-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),z(e,e.dyn_ltree,e.dyn_dtree)),v(e),n&&A(e)},_tr_tally:(e,t,_)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&_,e.last_lit++,0===t?e.dyn_ltree[2*_]++:(e.matches++,t--,e.dyn_ltree[2*(i[_]+256+1)]++,e.dyn_dtree[2*u(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{w(e,2,3),g(e,256,l),(e=>{16===e.bi_valid?(y(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}}});
//# sourceMappingURL=../sourcemaps/zlib/trees.js.map
