/**
 * skylark-pako - A skylark wrapper for pako.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./zlib/inflate","./utils/common","./utils/strings","./zlib/messages","./zlib/zstream","./zlib/gzheader","./zlib/constants"],function(t,i,n,s,o,e,r){"use strict";const a=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:h,Z_OK:w,Z_STREAM_END:c,Z_NEED_DICT:d,Z_STREAM_ERROR:l,Z_DATA_ERROR:f,Z_MEM_ERROR:_}=r;function p(r){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},r||{});const u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,0===u.windowBits&&(u.windowBits=-15)),!(u.windowBits>=0&&u.windowBits<16)||r&&r.windowBits||(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&0==(15&u.windowBits)&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let h=t.inflateInit2(this.strm,u.windowBits);if(h!==w)throw new Error(s[h]);if(this.header=new e,t.inflateGetHeader(this.strm,this.header),u.dictionary&&("string"==typeof u.dictionary?u.dictionary=n.string2buf(u.dictionary):"[object ArrayBuffer]"===a.call(u.dictionary)&&(u.dictionary=new Uint8Array(u.dictionary)),u.raw&&(h=t.inflateSetDictionary(this.strm,u.dictionary))!==w))throw new Error(s[h])}function y(t,i){const n=new p(i);if(n.push(t),n.err)throw n.msg||s[n.err];return n.result}return p.prototype.push=function(i,s){const o=this.strm,e=this.options.chunkSize,r=this.options.dictionary;let p,y,B;if(this.ended)return!1;for(y=s===~~s?s:!0===s?h:u,"[object ArrayBuffer]"===a.call(i)?o.input=new Uint8Array(i):o.input=i,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(e),o.next_out=0,o.avail_out=e),(p=t.inflate(o,y))===d&&r&&((p=t.inflateSetDictionary(o,r))===w?p=t.inflate(o,y):p===f&&(p=d));o.avail_in>0&&p===c&&o.state.wrap>0&&0!==i[o.next_in];)t.inflateReset(o),p=t.inflate(o,y);switch(p){case l:case f:case d:case _:return this.onEnd(p),this.ended=!0,!1}if(B=o.avail_out,o.next_out&&(0===o.avail_out||p===c))if("string"===this.options.to){let t=n.utf8border(o.output,o.next_out),i=o.next_out-t,s=n.buf2string(o.output,t);o.next_out=i,o.avail_out=e-i,i&&o.output.set(o.output.subarray(t,t+i),0),this.onData(s)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(p!==w||0!==B){if(p===c)return p=t.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===w&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},{Inflate:p,inflate:y,inflateRaw:function(t,i){return(i=i||{}).raw=!0,y(t,i)},ungzip:y,constants:r}});
//# sourceMappingURL=sourcemaps/inflates.js.map
