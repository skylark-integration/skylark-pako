/**
 * skylark-pako - A skylark wrapper for pako.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-compression/inflates","skylark-langx-compression/messages","skylark-langx-compression/zstream","skylark-langx-compression/constants","skylark-langx-compression/gzheader","./utils/common","./utils/strings"],function(t,i,n,s,o,r,e){"use strict";const a=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:h,Z_OK:w,Z_STREAM_END:c,Z_NEED_DICT:l,Z_STREAM_ERROR:d,Z_DATA_ERROR:f,Z_MEM_ERROR:p}=s;function _(s){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},s||{});const u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,0===u.windowBits&&(u.windowBits=-15)),!(u.windowBits>=0&&u.windowBits<16)||s&&s.windowBits||(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&0==(15&u.windowBits)&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;let h=t.inflateInit2(this.strm,u.windowBits);if(h!==w)throw new Error(i[h]);if(this.header=new o,t.inflateGetHeader(this.strm,this.header),u.dictionary&&("string"==typeof u.dictionary?u.dictionary=e.string2buf(u.dictionary):"[object ArrayBuffer]"===a.call(u.dictionary)&&(u.dictionary=new Uint8Array(u.dictionary)),u.raw&&(h=t.inflateSetDictionary(this.strm,u.dictionary))!==w))throw new Error(i[h])}function y(t,n){const s=new _(n);if(s.push(t),s.err)throw s.msg||i[s.err];return s.result}return _.prototype.push=function(i,n){const s=this.strm,o=this.options.chunkSize,r=this.options.dictionary;let _,y,g;if(this.ended)return!1;for(y=n===~~n?n:!0===n?h:u,"[object ArrayBuffer]"===a.call(i)?s.input=new Uint8Array(i):s.input=i,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(o),s.next_out=0,s.avail_out=o),(_=t.inflate(s,y))===l&&r&&((_=t.inflateSetDictionary(s,r))===w?_=t.inflate(s,y):_===f&&(_=l));s.avail_in>0&&_===c&&s.state.wrap>0&&0!==i[s.next_in];)t.inflateReset(s),_=t.inflate(s,y);switch(_){case d:case f:case l:case p:return this.onEnd(_),this.ended=!0,!1}if(g=s.avail_out,s.next_out&&(0===s.avail_out||_===c))if("string"===this.options.to){let t=e.utf8border(s.output,s.next_out),i=s.next_out-t,n=e.buf2string(s.output,t);s.next_out=i,s.avail_out=o-i,i&&s.output.set(s.output.subarray(t,t+i),0),this.onData(n)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(_!==w||0!==g){if(_===c)return _=t.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===w&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},{Inflate:_,inflate:y,inflateRaw:function(t,i){return(i=i||{}).raw=!0,y(t,i)},ungzip:y,constants:s}});
//# sourceMappingURL=sourcemaps/inflates.js.map
